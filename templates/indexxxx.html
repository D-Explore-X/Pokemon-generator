<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Random Pokémon Generator</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
    <div class="left-column">
        <header>
            <h1>Random Pokémon Generator</h1>
        </header>

        <form action="/generate" method="POST" id="controls" class="menu">
            <!-- Form elements here -->
            <fieldset>
                <label>Generate 
                    <select name="n" id="n" required>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6" selected>6</option>
                    </select> Pokémon.
                </label>
        
                <select name="region" id="region" required>
                    <option value="all">All Regions</option>
                    <option value="kanto" title="Generation 1 (Red, Blue, and Yellow)">Kanto</option>
                    <option value="johto" title="Generation 2 (Gold, Silver, and Crystal)">Johto</option>
                    <option value="hoenn" title="Generation 3 (Ruby, Sapphire, and Emerald)">Hoenn</option>
                    <option value="sinnoh" title="Generation 4 (Diamond, Pearl)">Sinnoh</option>
                    <option value="sinnoh_pt" title="Generation 4 (Platinum)">Sinnoh (Platinum)</option>
                    <option value="unova" title="Generation 5 (Black and White)">Unova</option>
                    <option value="unova_b2w2" title="Generation 5 (Black 2 and White 2)">Unova (B2W2)</option>
                    <option value="kalos" title="Generation 6 (X and Y)">Kalos</option>
                    <option value="alola" title="Generation 7 (Sun and Moon)">Alola</option>
                    <option value="alola_usum" title="Generation 7 (Ultra Sun and Ultra Moon)">Alola (USUM)</option>
                    <option value="galar" title="Generation 8 (Sword and Shield)">Galar</option>
                    <option value="hisui" title="Generation 8 (Legends: Arceus)">Hisui</option>
                    <option value="paldea" title="Generation 9 (Scarlet and Violet)">Paldea</option>
                </select>
        
                <select name="type" id="type" required>
                    <option value="all">All Types</option>
                    <option value="bug">Bug</option>
                    <option value="dark">Dark</option>
                    <option value="dragon">Dragon</option>
                    <option value="electric">Electric</option>
                    <option value="fairy">Fairy</option>
                    <option value="fighting">Fighting</option>
                    <option value="fire">Fire</option>
                    <option value="flying">Flying</option>
                    <option value="ghost">Ghost</option>
                    <option value="grass">Grass</option>
                    <option value="ground">Ground</option>
                    <option value="ice">Ice</option>
                    <option value="normal">Normal</option>
                    <option value="poison">Poison</option>
                    <option value="psychic">Psychic</option>
                    <option value="rock">Rock</option>
                    <option value="steel">Steel</option>
                    <option value="water">Water</option>
                </select>
            </fieldset>
        
            <fieldset>
                <label><input type="checkbox" id="legendaries" name="legendaries" value="true" checked>Legendaries</label>
        
                <label><input type="checkbox" id="nfes" name="nfes" value="true" checked>NFEs</label>
        
                <label><input type="checkbox" id="sprites" name="sprites" value="true" checked>Sprites</label>
                <label><input type="checkbox" id="natures" name="natures" value="true">Natures</label>
                <label><input type="checkbox" id="forms" name="forms" value="true" checked>Forms</label>
        
                <input value="Generate" type="submit" />
            </fieldset>
        </form>
    </div>
    <div class="right-column">
        <section id="results">
            <!-- Output results and sprites here -->
        </section>
    </div>
</div>

<footer>
    <p>Zeshan ALi Shoban . D Explore X</p>
</footer>
<!-- Add JavaScript to handle the form submission and update results -->
<!-- Add JavaScript to handle the form submission and update results -->
<script>
    document.getElementById("controls").addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent the form from submitting normally
        const formData = new FormData(this);
    
        // Send an AJAX request to Flask to generate Pokémon
        fetch("/generate", {
            method: "POST",
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            // Handle the response and update the results section
            const resultsSection = document.getElementById("results");
            resultsSection.innerHTML = ""; // Clear previous results
    
            // Get the description from the first Pokémon (main form)
            const description = data.pokemon[0].desc;
    
            // Iterate through the generated Pokémon and display them
            data.pokemon.forEach(pokemon => {
                const resultDiv = document.createElement("div");
                resultDiv.classList.add("pokemon-result");
    
                // Display the Pokémon name
                const nameElement = document.createElement("p");
                nameElement.textContent = `Name: ${pokemon.name}`;
                resultDiv.appendChild(nameElement);
    
                // Display the common description for all forms
                const descElement = document.createElement("p");
                descElement.textContent = `Description: ${pokemon.desc}`;
                resultDiv.appendChild(descElement);
    
                // If "forms" option is selected, display the forms (if available)
                if (data.forms && data.forms.length > 0) {
                    const formsElement = document.createElement("p");
                    formsElement.textContent = `Forms: ${pokemon.forms.map(form => form.name).join(', ')}`;
                    resultDiv.appendChild(formsElement);
                }
    
                // If "sprites" option is selected, display the sprite
                if (data.sprite_urls && data.sprite_urls.length > 0) {
                    const spriteImg = document.createElement("img");
                    spriteImg.src = data.sprite_urls.shift();
                    spriteImg.alt = pokemon.name;
                    resultDiv.appendChild(spriteImg);
                }
    
                // Append the resultDiv to the main results section
                resultsSection.appendChild(resultDiv);
            });
        })
        .catch(error => {
            console.error("Error:", error);
        });
    });
    </script>
    
</body>
</html>
